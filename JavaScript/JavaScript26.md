# [코드잇] 인터랙티브 자바스크립트 (3) (2021.2.23)



**상세 내용 [블로그](https://greedysiru.tistory.com/224) 참고**



# 이벤트 살펴보기

## 01. 이벤트 핸들러 등록하기

* onclick 프로퍼티는 여러개의 이벤트 핸들러를 다룰 수 없다.
  * 복잡한 로직을 다루기 어렵다.



### addEventListener 메소드

> **element.addEventListener(event, handler);**

* **하나의 요소에 여러 독립적인 이벤트 핸들러를 등록할 수 있다.**
* 첫 번째 파라미터 : 이벤트 타입 **문자열**
* 두 번째 파라미터 : 이벤트 핸들러
  * **외부에서 함수를 만들고 그 함수명을 전달**해야 한다.
  * **함수 이름만 전달**해야 한다(소괄호 생략)



### removveEventListener 메소드

> **element.removeEventListener(event, handler);**

* **이벤트 핸들러를 제거할 수 있다.**
* 첫 번째 파라미터: 이벤트 타입 **문자열**
* 두 번째 파리미터: 등록할 때 전달한 이벤트 핸들러
  * 등록할 때 사용했던 이벤트 핸들러를 그대로 전달해야 한다.



## 02. 다양한 이벤트

[더 많은 이벤트 정보](https://developer.mozilla.org/ko/docs/Web/Events)

### 마우스 이벤트

| 이벤트 타입 | 설명                                                         |
| ----------- | ------------------------------------------------------------ |
| mousedown   | 마우스 버튼을 누르는 순간                                    |
| mouseup     | 마우스 버튼을 누르고 뗀 순간                                 |
| click       | 왼쪽 버튼을 클릭한 순간                                      |
| dblclick    | 왼쪽 버튼을 빠르게 두 번 클릭한 순간                         |
| contextmenu | 오른쪽 버튼을 클릭한 순간                                    |
| mousemove   | 마우스를 움직이는 순간                                       |
| mouseover   | 마우스 포인터가 요소 위로 올라온 순간                        |
| mouseout    | 마우스 포인터가 요소 위에서 벗어나는 순간                    |
| mouseenter  | 마우스 포인터가 요소 위로 올라온 순간 (버블링이 일어나지 않음) |
| mouseleave  | 마우스 포인터가 요소에서 벗어나는 순간 (버를링이 일어나지 않음) |



### 키보드 이벤트

| 이벤트 타입 | 설명                                                     |
| ----------- | -------------------------------------------------------- |
| keydown     | 키보드의 버튼을 누르는 순간                              |
| keypress    | 키보드의 버튼을 누르는 순간(출력이 가능한 키에서만 동작) |
| keyup       | 키보드의 버튼을 눌렀다 떼는 순간                         |



### 포커스 이벤트

| 이벤트 타입 | 설명                                                         |
| ----------- | ------------------------------------------------------------ |
| focusin     | 요소에 포커스가 되는 순간                                    |
| focusout    | 요소로부터 포커스가 빠져나가는 순간                          |
| focus       | 요소에 포커스가 되는 순간 (버블링이 일어나지 않음)           |
| blur        | 요소로부터 포커스가 빠져나가는 순간 (버블링이 일어나지 않음) |

 

### 입력 이벤트

| 이벤트 타입 | 설명                         |
| ----------- | ---------------------------- |
| change      | 입력된 값이 바뀌는 순간      |
| input       | 값이 입력되는 순간           |
| select      | 입력 양식의 하나가 되는 순간 |
| submit      | 폼을 전송하는 순간           |



### 스크롤 이벤트

| 이벤트 타입 | 설명                  |
| ----------- | --------------------- |
| scroll      | 스크롤 바가 움직일 때 |



### 윈도우 창 이벤트

| 이벤트 타입 | 설명                           |
| ----------- | ------------------------------ |
| resize      | 윈도우 사이즈를 움직일 때 발생 |



## 03. 이벤트 객체

*  **웹 페이지의 이벤트와 관련된 다양한 정보를 담고 있는 객체**
* **.addEventListener() 메소드의 첫 번째 파라미터로 전달된다.**
* **두 번째 파라미터인 이벤트 핸들러의 첫 번째 파라미터에는 이벤트 객체가 전달된다.**
* 이벤트 핸들러에게 event 또는 e 로 전달된다.



### 예시

```javascript
const myBtn = document.quertySelector('#myBtn');

function printEvent(event){
  console.log(evnet);
}

myBtn.addEventListener('click', printEvent);
```





## 04. 이벤트 객체 프로퍼티

* 이벤트 객체는 많은 프로퍼티로 이루어져 있다.
* 이벤트 객체는 이벤트 타입에 따라서 갖고 있는 프로퍼티들이 다르다.



### 공통 프로퍼티

| 프로퍼티      | 설명                                                     |
| ------------- | -------------------------------------------------------- |
| type          | 이벤트 이름('click', 'mouseup', 'keydown' 등)            |
| target        | 이벤트가 발생한 요소                                     |
| currentTarget | 이벤트 핸들러가 등록된 요소                              |
| timeStamp     | 이벤트 발생 시각(페이지가 로드된 이후부터 경과한 밀리초) |
| bubbles       | 버블링 단계인지를 판단하는 값                            |



### 마우스 이벤트

| 프로퍼티         | 설명                                                         |
| ---------------- | ------------------------------------------------------------ |
| button           | 누른 마우스의 버튼 (0: 왼쪽, 1: 가운데(휠), 2: 오른쪽)       |
| clientX, clientY | 마우스 커서의 브라우저 표시 영역에서의 위치                  |
| pageX, pageY     | 마우스 커서의 문서 영역에서의 위치                           |
| offsetX, offsetY | 마우스 커서의 이벤트 발생한 요소에서의 위치                  |
| screenX, screenY | 마우스 커서의 모니터 화면 영역에서의 위치                    |
| altKey           | 이벤트가 발생할 때 alt 키를 눌렀는지                         |
| ctrlKey          | 이벤트가 발생할 때  ctrl 키를 눌렀는지                       |
| shiftKey         | 이벤트가 발생할 때 shfit 키를 눌렀는지                       |
| metaKey          | 이벤트가 발생할 때 meta 키를 눌렀는지 (window - window key, mac - cmd key) |



### 키보드 이벤트

| 프로퍼티 | 설명                                                         |
| -------- | ------------------------------------------------------------ |
| key      | 누른 키가 가지고 있는 값                                     |
| code     | 누른 키의 물리적 위치                                        |
| altKey   | 이벤트가 발생할 때 alt 키를 눌렀는지                         |
| ctrlKey  | 이벤트가 발생할 때  ctrl 키를 눌렀는지                       |
| shiftKey | 이벤트가 발생할 때 shfit 키를 눌렀는지                       |
| metaKey  | 이벤트가 발생할 때 meta 키를 눌렀는지 (window - window key, mac - cmd key) |



## 05. 이벤트 버블링

* **하나의 요소에 이벤트가 발생하면, 할당된 이벤트 핸들러가 동작 후 같은 타입의 이벤트에 한해서 부모 요소의 이벤트 핸들러도 동작하는 것**
* 가장 최상단의 window 객체를 만날 때 까지 이 과정이 반복
* 자식 요소, 부모 요소 각각에 할당된 모든 이벤트 핸들러가 동작
* **이벤트 객체의 target은 변하지 않는다. 시작점의 target으로 유지.**
  * 부모요소의 이벤트 핸들러들이 최초의 이벤트가 일어난 위치를 알 수 있다.
* **currentTarget 프로퍼티**: 버블링에 따라서 각각의 target을 접근



### 버블링 멈추기

> **event.stopPropagation();**

* 이벤트 객체에 해당 메소드를 사용하면 버블링을 멈출 수 있다.
* 단, 필요한 경우에만 사용할 것
* 버블링이 중단된 요소의 해당 범위만큼 모든 부모 요소의 이벤트 범위가 사라져 버리기 때문에 원하는 이벤트 결과를 얻지 못할 수 있다.



## 06. 캡쳐링

### DOM 이벤트에서 정의한 이벤트 흐름

1. 캡처링 단계: 이벤트가 하위 요소로 전파되는 단계
2. 타깃 단계: 이벤트가 실제 타깃 요소에 전달되는 단계 (가장 처음 이벤트 핸들러가 동작하게 되는 순간)
3. 버블링 단계: 이벤트가 상위 요소로 전파되는 단계



### 캡쳐링

* **이벤트가 발생하면 가장 먼저 버블링의 반대 방향으로 진행되는 이벤트 전파 방식**
* window 객체로부터 target까지 이벤트 전파가 일어난다. (캡처링 단계)
* 이후, target에 도달하면 등록된 이벤트 핸들러가 동작한다. (타깃 단계)
* 이후, 다시 window 객체로 거슬러 올라오며 이벤트가 전파된다. (버블링 단계)



### 캡쳐링에서 이벤트 발생시키기

> **element.addEventListener('event', eventhandler, true);**

* addEventListener의 세 번째 파라미터에 true 또는 {capture:true}를 전달
* 매우 드문 경우에 사용



## 07. 이벤트 위임

* 코드 상에서 새로운 요소가 추가되었을 때, 버블링을 활용하여 이벤트 핸들러를 등록할 수 있다.
* **부모 요소에 이벤드 핸들러를 등록해주면 자식 요소의 이벤트를 다룰 수 있게 된다.**
* but. 부모 요소의 범위에서도 이벤트 핸들러가 동작한다.
* 이를 방지하기 위해서 **tagName 프로퍼티 또는 .contains() 메소드**를 사용한다.
* **이벤트를 다룰 때 우선적으로 고려**
  * 유연한 코드
  * 여러개의 이벤트 핸들러를 만들지 않아도 된다.
  * 프로그램의 성능에도 긍정적인 영향
* 자식 요소중에 버블링을 막는 것이 있으면 안 된다.



### tagName 프로퍼티

> **element.tagName;**

* 해당 요소의 tag 이름 값을 대문자로 담고 있다.



### contains 메소드

> **element.classList.contains();**

* 파라미터로 전달한 값이 해당 요소에 클래스 속성에 있는지 확인 후 불린으로 결과를 리턴



### 예시

```javascript
const list = document.querySelector('#list');
list.addEventListener('click', function(e) {
	// if (e.target.tagName === 'LI') 로 대체 가능
	if (e.target.classList.contains('item')) {
		e.target.classList.toggle('done');
	}
});

// 새로운 자식 요소가 추가되어도 이벤트가 적용된다.
const li = document.createElement('li');
li.classList.add('item');
li.textContent = '일기 쓰기';
list.append(li);
li.addEventListener('click', function(e) {
  e.stopPropagation();
});
```



## 08. 브라우저의 기본 동작

* 대부분의 이벤트는 발생 순간 브라우저가 기본적으로 갖고 있는 동작을 수행
  * a 태그, input 태그의 checkbox, text 등
* 상황에 따라 기본 동작을 없앨 수 있다.
  * ex. 블로그의 오른쪽 클릭 방지



### preventDefault 메소드

> **event.preventDefault();**

* 이벤트에 의한 기본 동작을 막을 수 있다.
* if문을 활용해서 특정 상황에서만 기본 동작을 막을 수 있다.
* HTML 태그가 가지고 있는 고유한 역할과 의미를 훼손할 수 있으므로 필요한 경우에만 주의해서 사용



### 예시

* 마우스 우클릭 방지(contextmenu)

```javascript
// 문서 전체에 마우스 우클릭 방지
document.addEventListener('contextmenu', function(e){
  e.preventDefault();
  alert('마우스 오른쪽 클릭은 사용할 수 없습니다.');
});
```





# Reference

[코드잇 - 인터랙티브 자바스크립트](https://www.codeit.kr/courses/javascript-intermediate/topics/interactive-javascript)